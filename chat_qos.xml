<?xml version="1.0"?>
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/7.5.0/rti_dds_qos_profiles.xsd"
     version="7.5.0">

  <qos_library name="Chat_Library">

    <!-- Participant / transport -->
    <qos_profile name="Chat_Profile">
      <participant_qos>
        <participant_name><name>ChatApp</name></participant_name>
        <transport_builtin><mask>UDPv4</mask></transport_builtin>
      </participant_qos>
    </qos_profile>

    <!-- Users: keep your original (volatile) behavior -->
    <qos_profile name="ChatUser_Profile" base_name="BuiltinQosLibExp::Pattern.Status">
      <datareader_qos>
        <subscription_name><name>ChatUser_Reader</name></subscription_name>
        <liveliness><lease_duration><sec>3</sec><nanosec>0</nanosec></lease_duration></liveliness>
      </datareader_qos>
      <datawriter_qos>
        <publication_name><name>ChatUser_Writer</name></publication_name>
        <liveliness><lease_duration><sec>2</sec><nanosec>0</nanosec></lease_duration></liveliness>
      </datawriter_qos>
    </qos_profile>

    <!-- MESSAGES: persistent + reliable + keep-all -->
    <qos_profile name="ChatMessage_Persistent_Profile">
      <datawriter_qos>
        <publication_name><name>ChatMessage_Writer_Persistent</name></publication_name>
        <reliability><kind>RELIABLE_RELIABILITY_QOS</kind></reliability>
        <durability><kind>PERSISTENT_DURABILITY_QOS</kind></durability>
        <history><kind>KEEP_ALL_HISTORY_QOS</kind></history>
        <resource_limits>
          <max_samples>10000</max_samples>
          <max_instances>1024</max_instances>
          <max_samples_per_instance>10000</max_samples_per_instance>
        </resource_limits>
      </datawriter_qos>

      <datareader_qos>
        <subscription_name><name>ChatMessage_Reader_Persistent</name></subscription_name>
        <reliability><kind>RELIABLE_RELIABILITY_QOS</kind></reliability>
        <durability><kind>PERSISTENT_DURABILITY_QOS</kind></durability>
        <history><kind>KEEP_ALL_HISTORY_QOS</kind></history>
        <resource_limits>
          <max_samples>10000</max_samples>
          <max_instances>1024</max_instances>
          <max_samples_per_instance>10000</max_samples_per_instance>
        </resource_limits>
      </datareader_qos>
    </qos_profile>

  </qos_library>
</dds>
